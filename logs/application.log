2025-07-31 19:42:02 [main] INFO  c.a.g.GreenSuiteTestApplication - Starting GreenSuiteTestApplication using Java 23.0.1 with PID 19380 (C:\Users\User\Desktop\Git GreenSuite\GreenSuite_BackEnd-main\target\classes started by User in C:\Users\User\Desktop\Git GreenSuite\GreenSuite_BackEnd-main)
2025-07-31 19:42:02 [main] DEBUG c.a.g.GreenSuiteTestApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-31 19:42:02 [main] INFO  c.a.g.GreenSuiteTestApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-31 19:42:03 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-07-31 19:42:03 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-07-31 19:42:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 243 ms. Found 3 MongoDB repository interfaces.
2025-07-31 19:42:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-07-31 19:42:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-31 19:42:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JPA - Could not safely identify store assignment for repository candidate interface com.app.greensuitetest.repository.CarbonActivityRepository; If you want this repository to be a JPA repository, consider annotating your entities with one of these annotations: jakarta.persistence.Entity, jakarta.persistence.MappedSuperclass (preferred), or consider extending one of the following types with your repository: org.springframework.data.jpa.repository.JpaRepository
2025-07-31 19:42:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JPA - Could not safely identify store assignment for repository candidate interface com.app.greensuitetest.repository.CompanyRepository; If you want this repository to be a JPA repository, consider annotating your entities with one of these annotations: jakarta.persistence.Entity, jakarta.persistence.MappedSuperclass (preferred), or consider extending one of the following types with your repository: org.springframework.data.jpa.repository.JpaRepository
2025-07-31 19:42:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JPA - Could not safely identify store assignment for repository candidate interface com.app.greensuitetest.repository.UserRepository; If you want this repository to be a JPA repository, consider annotating your entities with one of these annotations: jakarta.persistence.Entity, jakarta.persistence.MappedSuperclass (preferred), or consider extending one of the following types with your repository: org.springframework.data.jpa.repository.JpaRepository
2025-07-31 19:42:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 0 JPA repository interfaces.
2025-07-31 19:42:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-07-31 19:42:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-07-31 19:42:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.app.greensuitetest.repository.CarbonActivityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-07-31 19:42:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.app.greensuitetest.repository.CompanyRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-07-31 19:42:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.app.greensuitetest.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-07-31 19:42:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2025-07-31 19:42:05 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-31 19:42:05 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-31 19:42:05 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-31 19:42:05 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-31 19:42:05 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2850 ms
2025-07-31 19:42:06 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync", "version": "5.5.1"}, "os": {"type": "Windows", "name": "Windows 11", "architecture": "amd64", "version": "10.0"}, "platform": "Java/Oracle Corporation/23.0.1+11-39"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@2507a170, com.mongodb.Jep395RecordCodecProvider@7e20f4e3, com.mongodb.KotlinCodecProvider@3af39e7b]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=UNSPECIFIED, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-07-31 19:42:06 [cluster-ClusterId{value='688b6ba599ec1f53041bdbf9', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=73779200, minRoundTripTimeNanos=0}
2025-07-31 19:42:06 [main] DEBUG c.a.g.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-07-31 19:42:06 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-31 19:42:07 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@5513a46b
2025-07-31 19:42:07 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-31 19:42:07 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-31 19:42:07 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-31 19:42:07 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-31 19:42:07 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-31 19:42:08 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 17.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-31 19:42:08 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-31 19:42:08 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-31 19:42:09 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"application": {"name": "Cluster0"}, "driver": {"name": "mongo-java-driver|sync", "version": "5.5.1"}, "os": {"type": "Windows", "name": "Windows 11", "architecture": "amd64", "version": "10.0"}, "platform": "Java/Oracle Corporation/23.0.1+11-39"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=majority, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=MongoCredential{mechanism=null, userName='root', source='admin', password=<hidden>, mechanismProperties=<hidden>}, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@2507a170, com.mongodb.Jep395RecordCodecProvider@7e20f4e3, com.mongodb.KotlinCodecProvider@3af39e7b]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvHost=cluster0.reg096x.mongodb.net, srvServiceName=mongodb, mode=MULTIPLE, requiredClusterType=REPLICA_SET, requiredReplicaSetName='atlas-a2wisu-shard-0', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=true, invalidHostNameAllowed=false, context=null}, applicationName='Cluster0', compressorList=[], uuidRepresentation=UNSPECIFIED, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-07-31 19:42:09 [cluster-ClusterId{value='688b6ba999ec1f53041bdbfa', description='Cluster0'}-srv-cluster0.reg096x.mongodb.net] INFO  org.mongodb.driver.cluster - Adding discovered server ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017 to client view of cluster
2025-07-31 19:42:09 [cluster-ClusterId{value='688b6ba999ec1f53041bdbfa', description='Cluster0'}-srv-cluster0.reg096x.mongodb.net] INFO  org.mongodb.driver.cluster - Adding discovered server ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017 to client view of cluster
2025-07-31 19:42:09 [cluster-ClusterId{value='688b6ba999ec1f53041bdbfa', description='Cluster0'}-srv-cluster0.reg096x.mongodb.net] INFO  org.mongodb.driver.cluster - Adding discovered server ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017 to client view of cluster
2025-07-31 19:42:09 [main] INFO  org.mongodb.driver.cluster - Waiting for server to become available for operation with ID 10. Remaining time: 29996 ms. Selector: ReadPreferenceServerSelector{readPreference=primary}, topology description: {type=REPLICA_SET, servers=[{address=ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017, type=UNKNOWN, state=CONNECTING}, {address=ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017, type=UNKNOWN, state=CONNECTING}, {address=ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017, type=UNKNOWN, state=CONNECTING}].
2025-07-31 19:42:09 [cluster-ClusterId{value='688b6ba999ec1f53041bdbfa', description='Cluster0'}-ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017, type=REPLICA_SET_SECONDARY, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=316010000, minRoundTripTimeNanos=0, setName='atlas-a2wisu-shard-0', canonicalAddress=ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017, hosts=[ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017, ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017, ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017], passives=[], arbiters=[], primary='ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017', tagSet=TagSet{[Tag{name='availabilityZone', value='asia-southeast1-b'}, Tag{name='diskState', value='READY'}, Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='GCP'}, Tag{name='region', value='SOUTHEASTERN_ASIA_PACIFIC'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=75, topologyVersion=TopologyVersion{processId=687b9f8f929f40db9d4607f0, counter=3}, lastWriteDate=Thu Jul 31 19:42:09 GMT+06:30 2025, lastUpdateTimeNanos=213107505894100}
2025-07-31 19:42:09 [cluster-ClusterId{value='688b6ba999ec1f53041bdbfa', description='Cluster0'}-ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017, type=REPLICA_SET_PRIMARY, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=316303100, minRoundTripTimeNanos=0, setName='atlas-a2wisu-shard-0', canonicalAddress=ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017, hosts=[ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017, ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017, ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017], passives=[], arbiters=[], primary='ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017', tagSet=TagSet{[Tag{name='availabilityZone', value='asia-southeast1-c'}, Tag{name='diskState', value='READY'}, Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='GCP'}, Tag{name='region', value='SOUTHEASTERN_ASIA_PACIFIC'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff000000000000023e, setVersion=75, topologyVersion=TopologyVersion{processId=687b9c9f1ed5bcdde2780983, counter=6}, lastWriteDate=Thu Jul 31 19:42:09 GMT+06:30 2025, lastUpdateTimeNanos=213107505929000}
2025-07-31 19:42:09 [cluster-ClusterId{value='688b6ba999ec1f53041bdbfa', description='Cluster0'}-ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017, type=REPLICA_SET_SECONDARY, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=316267200, minRoundTripTimeNanos=0, setName='atlas-a2wisu-shard-0', canonicalAddress=ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017, hosts=[ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017, ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017, ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017], passives=[], arbiters=[], primary='ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017', tagSet=TagSet{[Tag{name='availabilityZone', value='asia-southeast1-a'}, Tag{name='diskState', value='READY'}, Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='GCP'}, Tag{name='region', value='SOUTHEASTERN_ASIA_PACIFIC'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=75, topologyVersion=TopologyVersion{processId=687b9a1bd1949089db6fffc8, counter=4}, lastWriteDate=Thu Jul 31 19:42:09 GMT+06:30 2025, lastUpdateTimeNanos=213107505894200}
2025-07-31 19:42:09 [cluster-ClusterId{value='688b6ba999ec1f53041bdbfa', description='Cluster0'}-ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017] INFO  org.mongodb.driver.cluster - Discovered replica set primary ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017 with max election id 7fffffff000000000000023e and max set version 75
2025-07-31 19:42:30 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-07-31 19:42:30 [main] INFO  c.a.g.s.DocumentIngestionService - Starting enhanced document ingestion process...
2025-07-31 19:42:30 [main] DEBUG c.a.g.s.DocumentIngestionService - Vector store contains documents: true
2025-07-31 19:42:30 [main] INFO  c.a.g.s.DocumentIngestionService - Documents already exist in vector store. Skipping ingestion. Set app.document.ingestion.force-reingest=true to force re-ingestion.
2025-07-31 19:42:30 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-31 19:42:31 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-07-31 19:42:32 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-31 19:42:32 [main] INFO  c.a.g.GreenSuiteTestApplication - Started GreenSuiteTestApplication in 30.046 seconds (process running for 31.201)
2025-07-31 19:42:32 [RMI TCP Connection(4)-192.168.100.7] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-31 19:42:32 [RMI TCP Connection(4)-192.168.100.7] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-31 19:42:32 [RMI TCP Connection(4)-192.168.100.7] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-07-31 19:43:49 [http-nio-8080-exec-10] DEBUG c.a.g.controller.AIChatController - Starting enhanced streaming chat for conversation: default with message: what_is_my_name
2025-07-31 19:43:49 [http-nio-8080-exec-10] DEBUG c.a.g.s.ConversationContextService - Built comprehensive context with 15 elements for conversation: default
2025-07-31 19:43:49 [http-nio-8080-exec-10] DEBUG c.a.g.controller.AIChatController - Built fresh enhanced context for conversation: default
2025-07-31 19:43:50 [http-nio-8080-exec-10] WARN  c.a.g.controller.AIChatController - Enhanced vector search failed for query 'what_is_my_name': Command failed with error 8 (UnknownError): 'PlanExecutor error during aggregation :: caused by :: Path 'metadata.domain' needs to be indexed as token' on server ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017. The full response is {"ok": 0.0, "errmsg": "PlanExecutor error during aggregation :: caused by :: Path 'metadata.domain' needs to be indexed as token", "code": 8, "codeName": "UnknownError", "$clusterTime": {"clusterTime": {"$timestamp": {"t": 1753967629, "i": 8}}, "signature": {"hash": {"$binary": {"base64": "FuaOrO4W8spHo3mQ9ef5mEop+zA=", "subType": "00"}}, "keyId": 7502068596248412165}}, "operationTime": {"$timestamp": {"t": 1753967629, "i": 8}}}
2025-07-31 19:43:50 [http-nio-8080-exec-10] DEBUG c.a.g.service.DocumentContextService - Query analysis: type=GENERAL, domain=general, complexity=SIMPLE, concepts=[]
2025-07-31 19:43:50 [http-nio-8080-exec-10] DEBUG c.a.g.controller.AIChatController - Added 10 relevant messages from chat history for conversation: default
2025-07-31 19:43:50 [http-nio-8080-exec-10] DEBUG c.a.g.controller.AIChatController - Built enhanced prompt with 12 total messages for conversation: default
2025-07-31 19:44:06 [HttpClient-2-Worker-0] DEBUG c.a.g.controller.AIChatController - Saved enhanced chat exchange to memory for conversation: default
2025-07-31 19:44:06 [HttpClient-2-Worker-0] DEBUG c.a.g.s.ConversationContextService - Updated context cache for conversation: default
2025-07-31 19:44:42 [http-nio-8080-exec-3] DEBUG c.a.g.controller.AIChatController - Starting enhanced streaming chat for conversation: default with message: what kind of bot are you?
2025-07-31 19:44:42 [http-nio-8080-exec-3] DEBUG c.a.g.controller.AIChatController - Using cached context for conversation: default
2025-07-31 19:44:43 [http-nio-8080-exec-3] WARN  c.a.g.controller.AIChatController - Enhanced vector search failed for query 'what kind of bot are you?': Command failed with error 8 (UnknownError): 'PlanExecutor error during aggregation :: caused by :: Path 'metadata.domain' needs to be indexed as token' on server ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017. The full response is {"ok": 0.0, "errmsg": "PlanExecutor error during aggregation :: caused by :: Path 'metadata.domain' needs to be indexed as token", "code": 8, "codeName": "UnknownError", "$clusterTime": {"clusterTime": {"$timestamp": {"t": 1753967682, "i": 14}}, "signature": {"hash": {"$binary": {"base64": "QDd/NRMQ43mu2qzzFTfIh7EYT8k=", "subType": "00"}}, "keyId": 7502068596248412165}}, "operationTime": {"$timestamp": {"t": 1753967682, "i": 14}}}
2025-07-31 19:44:44 [http-nio-8080-exec-3] DEBUG c.a.g.service.DocumentContextService - Query analysis: type=GENERAL, domain=general, complexity=SIMPLE, concepts=[]
2025-07-31 19:44:44 [http-nio-8080-exec-3] DEBUG c.a.g.controller.AIChatController - Added 10 relevant messages from chat history for conversation: default
2025-07-31 19:44:44 [http-nio-8080-exec-3] DEBUG c.a.g.controller.AIChatController - Built enhanced prompt with 12 total messages for conversation: default
2025-07-31 19:44:54 [HttpClient-2-Worker-2] DEBUG c.a.g.controller.AIChatController - Saved enhanced chat exchange to memory for conversation: default
2025-07-31 19:44:54 [HttpClient-2-Worker-2] DEBUG c.a.g.s.ConversationContextService - Updated context cache for conversation: default
2025-07-31 19:47:50 [cluster-ClusterId{value='688b6ba999ec1f53041bdbfa', description='Cluster0'}-ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017] INFO  org.mongodb.driver.cluster - Exception in monitor thread while connecting to server ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017
com.mongodb.MongoSocketReadException: Exception receiving message
	at com.mongodb.internal.connection.InternalStreamConnection.translateReadException(InternalStreamConnection.java:809)
	at com.mongodb.internal.connection.InternalStreamConnection.receiveResponseBuffers(InternalStreamConnection.java:857)
	at com.mongodb.internal.connection.InternalStreamConnection.receiveCommandMessageResponse(InternalStreamConnection.java:517)
	at com.mongodb.internal.connection.InternalStreamConnection.receive(InternalStreamConnection.java:469)
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitor.lookupServerDescription(DefaultServerMonitor.java:249)
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitor.run(DefaultServerMonitor.java:176)
Caused by: java.net.SocketException: Connection reset
	at java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:318)
	at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:346)
	at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:796)
	at java.base/java.net.Socket$SocketInputStream.implRead(Socket.java:1116)
	at java.base/java.net.Socket$SocketInputStream.read(Socket.java:1103)
	at java.base/sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:489)
	at java.base/sun.security.ssl.SSLSocketInputRecord.readHeader(SSLSocketInputRecord.java:483)
	at java.base/sun.security.ssl.SSLSocketInputRecord.bytesInCompletePacket(SSLSocketInputRecord.java:70)
	at java.base/sun.security.ssl.SSLSocketImpl.readApplicationRecord(SSLSocketImpl.java:1462)
	at java.base/sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:1068)
	at com.mongodb.internal.connection.SocketStream.read(SocketStream.java:182)
	at com.mongodb.internal.connection.InternalStreamConnection.receiveResponseBuffers(InternalStreamConnection.java:824)
	... 4 common frames omitted
2025-07-31 19:47:50 [cluster-ClusterId{value='688b6ba999ec1f53041bdbfa', description='Cluster0'}-ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017] INFO  org.mongodb.driver.cluster - Exception in monitor thread while connecting to server ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017
com.mongodb.MongoSocketReadException: Exception receiving message
	at com.mongodb.internal.connection.InternalStreamConnection.translateReadException(InternalStreamConnection.java:809)
	at com.mongodb.internal.connection.InternalStreamConnection.receiveResponseBuffers(InternalStreamConnection.java:857)
	at com.mongodb.internal.connection.InternalStreamConnection.receiveCommandMessageResponse(InternalStreamConnection.java:517)
	at com.mongodb.internal.connection.InternalStreamConnection.receive(InternalStreamConnection.java:469)
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitor.lookupServerDescription(DefaultServerMonitor.java:249)
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitor.run(DefaultServerMonitor.java:176)
Caused by: java.net.SocketException: Connection reset
	at java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:318)
	at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:346)
	at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:796)
	at java.base/java.net.Socket$SocketInputStream.implRead(Socket.java:1116)
	at java.base/java.net.Socket$SocketInputStream.read(Socket.java:1103)
	at java.base/sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:489)
	at java.base/sun.security.ssl.SSLSocketInputRecord.readHeader(SSLSocketInputRecord.java:483)
	at java.base/sun.security.ssl.SSLSocketInputRecord.bytesInCompletePacket(SSLSocketInputRecord.java:70)
	at java.base/sun.security.ssl.SSLSocketImpl.readApplicationRecord(SSLSocketImpl.java:1462)
	at java.base/sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:1068)
	at com.mongodb.internal.connection.SocketStream.read(SocketStream.java:182)
	at com.mongodb.internal.connection.InternalStreamConnection.receiveResponseBuffers(InternalStreamConnection.java:824)
	... 4 common frames omitted
2025-07-31 19:47:58 [cluster-ClusterId{value='688b6ba999ec1f53041bdbfa', description='Cluster0'}-ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017] INFO  org.mongodb.driver.cluster - Exception in monitor thread while connecting to server ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017
com.mongodb.MongoSocketException: This is usually a temporary error during hostname resolution and means that the local server did not receive a response from an authoritative server (ac-qe7vmrt-shard-00-01.reg096x.mongodb.net)
	at com.mongodb.internal.connection.ServerAddressHelper.getSocketAddresses(ServerAddressHelper.java:75)
	at com.mongodb.internal.connection.SocketStream.initializeSocket(SocketStream.java:100)
	at com.mongodb.internal.connection.SocketStream.open(SocketStream.java:79)
	at com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:233)
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitor.lookupServerDescription(DefaultServerMonitor.java:219)
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitor.run(DefaultServerMonitor.java:176)
Caused by: java.net.UnknownHostException: This is usually a temporary error during hostname resolution and means that the local server did not receive a response from an authoritative server (ac-qe7vmrt-shard-00-01.reg096x.mongodb.net)
	at java.base/java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)
	at java.base/java.net.Inet6AddressImpl.lookupAllHostAddr(Inet6AddressImpl.java:52)
	at java.base/java.net.InetAddress$PlatformResolver.lookupByName(InetAddress.java:1221)
	at java.base/java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1817)
	at java.base/java.net.InetAddress$NameServiceAddresses.get(InetAddress.java:1149)
	at java.base/java.net.InetAddress.getAllByName0(InetAddress.java:1807)
	at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1676)
	at com.mongodb.internal.connection.DefaultInetAddressResolver.lookupByName(DefaultInetAddressResolver.java:34)
	at com.mongodb.internal.connection.ServerAddressHelper.getSocketAddresses(ServerAddressHelper.java:71)
	... 5 common frames omitted
2025-07-31 19:47:58 [cluster-ClusterId{value='688b6ba999ec1f53041bdbfa', description='Cluster0'}-ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017] INFO  org.mongodb.driver.cluster - Exception in monitor thread while connecting to server ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017
com.mongodb.MongoSocketException: This is usually a temporary error during hostname resolution and means that the local server did not receive a response from an authoritative server (ac-qe7vmrt-shard-00-02.reg096x.mongodb.net)
	at com.mongodb.internal.connection.ServerAddressHelper.getSocketAddresses(ServerAddressHelper.java:75)
	at com.mongodb.internal.connection.SocketStream.initializeSocket(SocketStream.java:100)
	at com.mongodb.internal.connection.SocketStream.open(SocketStream.java:79)
	at com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:233)
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitor.lookupServerDescription(DefaultServerMonitor.java:219)
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitor.run(DefaultServerMonitor.java:176)
Caused by: java.net.UnknownHostException: This is usually a temporary error during hostname resolution and means that the local server did not receive a response from an authoritative server (ac-qe7vmrt-shard-00-02.reg096x.mongodb.net)
	at java.base/java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)
	at java.base/java.net.Inet6AddressImpl.lookupAllHostAddr(Inet6AddressImpl.java:52)
	at java.base/java.net.InetAddress$PlatformResolver.lookupByName(InetAddress.java:1221)
	at java.base/java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1817)
	at java.base/java.net.InetAddress$NameServiceAddresses.get(InetAddress.java:1149)
	at java.base/java.net.InetAddress.getAllByName0(InetAddress.java:1807)
	at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1676)
	at com.mongodb.internal.connection.DefaultInetAddressResolver.lookupByName(DefaultInetAddressResolver.java:34)
	at com.mongodb.internal.connection.ServerAddressHelper.getSocketAddresses(ServerAddressHelper.java:71)
	... 5 common frames omitted
2025-07-31 19:48:10 [cluster-ClusterId{value='688b6ba999ec1f53041bdbfa', description='Cluster0'}-ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017] INFO  org.mongodb.driver.cluster - Exception in monitor thread while connecting to server ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017
com.mongodb.MongoSocketReadTimeoutException: Timeout while receiving message
	at com.mongodb.internal.connection.InternalStreamConnection.createReadTimeoutException(InternalStreamConnection.java:819)
	at com.mongodb.internal.connection.InternalStreamConnection.translateReadException(InternalStreamConnection.java:807)
	at com.mongodb.internal.connection.InternalStreamConnection.receiveResponseBuffers(InternalStreamConnection.java:857)
	at com.mongodb.internal.connection.InternalStreamConnection.receiveCommandMessageResponse(InternalStreamConnection.java:517)
	at com.mongodb.internal.connection.InternalStreamConnection.receive(InternalStreamConnection.java:469)
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitor.lookupServerDescription(DefaultServerMonitor.java:249)
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitor.run(DefaultServerMonitor.java:176)
Caused by: java.net.SocketTimeoutException: Read timed out
	at java.base/sun.nio.ch.NioSocketImpl.timedRead(NioSocketImpl.java:278)
	at java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:304)
	at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:346)
	at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:796)
	at java.base/java.net.Socket$SocketInputStream.implRead(Socket.java:1116)
	at java.base/java.net.Socket$SocketInputStream.read(Socket.java:1103)
	at java.base/sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:489)
	at java.base/sun.security.ssl.SSLSocketInputRecord.readHeader(SSLSocketInputRecord.java:483)
	at java.base/sun.security.ssl.SSLSocketInputRecord.bytesInCompletePacket(SSLSocketInputRecord.java:70)
	at java.base/sun.security.ssl.SSLSocketImpl.readApplicationRecord(SSLSocketImpl.java:1462)
	at java.base/sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:1068)
	at com.mongodb.internal.connection.SocketStream.read(SocketStream.java:182)
	at com.mongodb.internal.connection.InternalStreamConnection.receiveResponseBuffers(InternalStreamConnection.java:824)
	... 4 common frames omitted
2025-07-31 19:48:11 [cluster-ClusterId{value='688b6ba999ec1f53041bdbfa', description='Cluster0'}-ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017] INFO  org.mongodb.driver.cluster - Exception in monitor thread while connecting to server ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017
com.mongodb.MongoSocketWriteException: Exception sending message
	at com.mongodb.internal.connection.InternalStreamConnection.throwTranslatedWriteException(InternalStreamConnection.java:785)
	at com.mongodb.internal.connection.InternalStreamConnection.sendMessage(InternalStreamConnection.java:670)
	at com.mongodb.internal.connection.InternalStreamConnection.trySendMessage(InternalStreamConnection.java:507)
	at com.mongodb.internal.connection.InternalStreamConnection.sendCommandMessage(InternalStreamConnection.java:482)
	at com.mongodb.internal.connection.InternalStreamConnection.sendAndReceiveInternal(InternalStreamConnection.java:440)
	at com.mongodb.internal.connection.InternalStreamConnection.lambda$sendAndReceive$0(InternalStreamConnection.java:375)
	at com.mongodb.internal.connection.InternalStreamConnection.sendAndReceive(InternalStreamConnection.java:378)
	at com.mongodb.internal.connection.CommandHelper.sendAndReceive(CommandHelper.java:100)
	at com.mongodb.internal.connection.CommandHelper.executeCommand(CommandHelper.java:49)
	at com.mongodb.internal.connection.InternalStreamConnectionInitializer.initializeConnectionDescription(InternalStreamConnectionInitializer.java:144)
	at com.mongodb.internal.connection.InternalStreamConnectionInitializer.startHandshake(InternalStreamConnectionInitializer.java:79)
	at com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:235)
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitor.lookupServerDescription(DefaultServerMonitor.java:219)
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitor.run(DefaultServerMonitor.java:176)
Caused by: java.net.SocketException: Connection reset
	at java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:318)
	at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:346)
	at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:796)
	at java.base/java.net.Socket$SocketInputStream.implRead(Socket.java:1116)
	at java.base/java.net.Socket$SocketInputStream.read(Socket.java:1103)
	at java.base/sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:489)
	at java.base/sun.security.ssl.SSLSocketInputRecord.readHeader(SSLSocketInputRecord.java:483)
	at java.base/sun.security.ssl.SSLSocketInputRecord.decode(SSLSocketInputRecord.java:160)
	at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:111)
	at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1507)
	at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1422)
	at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:455)
	at java.base/sun.security.ssl.SSLSocketImpl.ensureNegotiated(SSLSocketImpl.java:924)
	at java.base/sun.security.ssl.SSLSocketImpl$AppOutputStream.write(SSLSocketImpl.java:1293)
	at com.mongodb.internal.connection.SocketStream.write(SocketStream.java:165)
	at com.mongodb.internal.connection.InternalStreamConnection.sendMessage(InternalStreamConnection.java:667)
	... 12 common frames omitted
2025-07-31 19:48:11 [cluster-ClusterId{value='688b6ba999ec1f53041bdbfa', description='Cluster0'}-ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017] INFO  org.mongodb.driver.cluster - Exception in monitor thread while connecting to server ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017
com.mongodb.MongoSocketWriteException: Exception sending message
	at com.mongodb.internal.connection.InternalStreamConnection.throwTranslatedWriteException(InternalStreamConnection.java:785)
	at com.mongodb.internal.connection.InternalStreamConnection.sendMessage(InternalStreamConnection.java:670)
	at com.mongodb.internal.connection.InternalStreamConnection.trySendMessage(InternalStreamConnection.java:507)
	at com.mongodb.internal.connection.InternalStreamConnection.sendCommandMessage(InternalStreamConnection.java:482)
	at com.mongodb.internal.connection.InternalStreamConnection.sendAndReceiveInternal(InternalStreamConnection.java:440)
	at com.mongodb.internal.connection.InternalStreamConnection.lambda$sendAndReceive$0(InternalStreamConnection.java:375)
	at com.mongodb.internal.connection.InternalStreamConnection.sendAndReceive(InternalStreamConnection.java:378)
	at com.mongodb.internal.connection.CommandHelper.sendAndReceive(CommandHelper.java:100)
	at com.mongodb.internal.connection.CommandHelper.executeCommand(CommandHelper.java:49)
	at com.mongodb.internal.connection.InternalStreamConnectionInitializer.initializeConnectionDescription(InternalStreamConnectionInitializer.java:144)
	at com.mongodb.internal.connection.InternalStreamConnectionInitializer.startHandshake(InternalStreamConnectionInitializer.java:79)
	at com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:235)
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitor.lookupServerDescription(DefaultServerMonitor.java:219)
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitor.run(DefaultServerMonitor.java:176)
Caused by: java.net.SocketException: Connection reset
	at java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:318)
	at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:346)
	at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:796)
	at java.base/java.net.Socket$SocketInputStream.implRead(Socket.java:1116)
	at java.base/java.net.Socket$SocketInputStream.read(Socket.java:1103)
	at java.base/sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:489)
	at java.base/sun.security.ssl.SSLSocketInputRecord.readHeader(SSLSocketInputRecord.java:483)
	at java.base/sun.security.ssl.SSLSocketInputRecord.decode(SSLSocketInputRecord.java:160)
	at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:111)
	at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1507)
	at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1422)
	at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:455)
	at java.base/sun.security.ssl.SSLSocketImpl.ensureNegotiated(SSLSocketImpl.java:924)
	at java.base/sun.security.ssl.SSLSocketImpl$AppOutputStream.write(SSLSocketImpl.java:1293)
	at com.mongodb.internal.connection.SocketStream.write(SocketStream.java:165)
	at com.mongodb.internal.connection.InternalStreamConnection.sendMessage(InternalStreamConnection.java:667)
	... 12 common frames omitted
2025-07-31 19:48:11 [cluster-ClusterId{value='688b6ba999ec1f53041bdbfa', description='Cluster0'}-ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017] INFO  org.mongodb.driver.cluster - Exception in monitor thread while connecting to server ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017
com.mongodb.MongoSocketWriteException: Exception sending message
	at com.mongodb.internal.connection.InternalStreamConnection.throwTranslatedWriteException(InternalStreamConnection.java:785)
	at com.mongodb.internal.connection.InternalStreamConnection.sendMessage(InternalStreamConnection.java:670)
	at com.mongodb.internal.connection.InternalStreamConnection.trySendMessage(InternalStreamConnection.java:507)
	at com.mongodb.internal.connection.InternalStreamConnection.sendCommandMessage(InternalStreamConnection.java:482)
	at com.mongodb.internal.connection.InternalStreamConnection.sendAndReceiveInternal(InternalStreamConnection.java:440)
	at com.mongodb.internal.connection.InternalStreamConnection.lambda$sendAndReceive$0(InternalStreamConnection.java:375)
	at com.mongodb.internal.connection.InternalStreamConnection.sendAndReceive(InternalStreamConnection.java:378)
	at com.mongodb.internal.connection.CommandHelper.sendAndReceive(CommandHelper.java:100)
	at com.mongodb.internal.connection.CommandHelper.executeCommand(CommandHelper.java:49)
	at com.mongodb.internal.connection.InternalStreamConnectionInitializer.initializeConnectionDescription(InternalStreamConnectionInitializer.java:144)
	at com.mongodb.internal.connection.InternalStreamConnectionInitializer.startHandshake(InternalStreamConnectionInitializer.java:79)
	at com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:235)
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitor.lookupServerDescription(DefaultServerMonitor.java:219)
	at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitor.run(DefaultServerMonitor.java:176)
Caused by: java.net.SocketException: Connection reset
	at java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:318)
	at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:346)
	at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:796)
	at java.base/java.net.Socket$SocketInputStream.implRead(Socket.java:1116)
	at java.base/java.net.Socket$SocketInputStream.read(Socket.java:1103)
	at java.base/sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:489)
	at java.base/sun.security.ssl.SSLSocketInputRecord.readHeader(SSLSocketInputRecord.java:483)
	at java.base/sun.security.ssl.SSLSocketInputRecord.decode(SSLSocketInputRecord.java:160)
	at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:111)
	at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1507)
	at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1422)
	at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:455)
	at java.base/sun.security.ssl.SSLSocketImpl.ensureNegotiated(SSLSocketImpl.java:924)
	at java.base/sun.security.ssl.SSLSocketImpl$AppOutputStream.write(SSLSocketImpl.java:1293)
	at com.mongodb.internal.connection.SocketStream.write(SocketStream.java:165)
	at com.mongodb.internal.connection.InternalStreamConnection.sendMessage(InternalStreamConnection.java:667)
	... 12 common frames omitted
2025-07-31 19:48:21 [cluster-ClusterId{value='688b6ba999ec1f53041bdbfa', description='Cluster0'}-ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017, type=REPLICA_SET_SECONDARY, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=67096400, minRoundTripTimeNanos=0, setName='atlas-a2wisu-shard-0', canonicalAddress=ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017, hosts=[ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017, ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017, ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017], passives=[], arbiters=[], primary='ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017', tagSet=TagSet{[Tag{name='availabilityZone', value='asia-southeast1-b'}, Tag{name='diskState', value='READY'}, Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='GCP'}, Tag{name='region', value='SOUTHEASTERN_ASIA_PACIFIC'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=75, topologyVersion=TopologyVersion{processId=687b9f8f929f40db9d4607f0, counter=3}, lastWriteDate=Thu Jul 31 19:48:20 GMT+06:30 2025, lastUpdateTimeNanos=213479052106800}
2025-07-31 19:48:22 [cluster-ClusterId{value='688b6ba999ec1f53041bdbfa', description='Cluster0'}-ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017, type=REPLICA_SET_SECONDARY, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=67558100, minRoundTripTimeNanos=0, setName='atlas-a2wisu-shard-0', canonicalAddress=ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017, hosts=[ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017, ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017, ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017], passives=[], arbiters=[], primary='ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017', tagSet=TagSet{[Tag{name='availabilityZone', value='asia-southeast1-a'}, Tag{name='diskState', value='READY'}, Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='GCP'}, Tag{name='region', value='SOUTHEASTERN_ASIA_PACIFIC'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=75, topologyVersion=TopologyVersion{processId=687b9a1bd1949089db6fffc8, counter=4}, lastWriteDate=Thu Jul 31 19:48:21 GMT+06:30 2025, lastUpdateTimeNanos=213480030298300}
2025-07-31 19:48:22 [cluster-ClusterId{value='688b6ba999ec1f53041bdbfa', description='Cluster0'}-ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017, type=REPLICA_SET_PRIMARY, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=63474600, minRoundTripTimeNanos=0, setName='atlas-a2wisu-shard-0', canonicalAddress=ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017, hosts=[ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017, ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017, ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017], passives=[], arbiters=[], primary='ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017', tagSet=TagSet{[Tag{name='availabilityZone', value='asia-southeast1-c'}, Tag{name='diskState', value='READY'}, Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='GCP'}, Tag{name='region', value='SOUTHEASTERN_ASIA_PACIFIC'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff000000000000023e, setVersion=75, topologyVersion=TopologyVersion{processId=687b9c9f1ed5bcdde2780983, counter=6}, lastWriteDate=Thu Jul 31 19:48:21 GMT+06:30 2025, lastUpdateTimeNanos=213480039103100}
2025-07-31 19:48:22 [cluster-ClusterId{value='688b6ba999ec1f53041bdbfa', description='Cluster0'}-ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017] INFO  org.mongodb.driver.cluster - Discovered replica set primary ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017 with max election id 7fffffff000000000000023e and max set version 75
2025-07-31 19:49:30 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-31 19:49:30 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-31 19:49:33 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-31 19:49:34 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-31 19:49:34 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-31 19:52:55 [main] INFO  c.a.g.GreenSuiteTestApplication - Starting GreenSuiteTestApplication using Java 23.0.1 with PID 9736 (C:\Users\User\Desktop\Git GreenSuite\GreenSuite_BackEnd-main\target\classes started by User in C:\Users\User\Desktop\Git GreenSuite\GreenSuite_BackEnd-main)
2025-07-31 19:52:55 [main] DEBUG c.a.g.GreenSuiteTestApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-31 19:52:55 [main] INFO  c.a.g.GreenSuiteTestApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-31 19:52:56 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-07-31 19:52:56 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-07-31 19:52:56 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 175 ms. Found 3 MongoDB repository interfaces.
2025-07-31 19:52:57 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-07-31 19:52:57 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-31 19:52:57 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JPA - Could not safely identify store assignment for repository candidate interface com.app.greensuitetest.repository.CarbonActivityRepository; If you want this repository to be a JPA repository, consider annotating your entities with one of these annotations: jakarta.persistence.Entity, jakarta.persistence.MappedSuperclass (preferred), or consider extending one of the following types with your repository: org.springframework.data.jpa.repository.JpaRepository
2025-07-31 19:52:57 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JPA - Could not safely identify store assignment for repository candidate interface com.app.greensuitetest.repository.CompanyRepository; If you want this repository to be a JPA repository, consider annotating your entities with one of these annotations: jakarta.persistence.Entity, jakarta.persistence.MappedSuperclass (preferred), or consider extending one of the following types with your repository: org.springframework.data.jpa.repository.JpaRepository
2025-07-31 19:52:57 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JPA - Could not safely identify store assignment for repository candidate interface com.app.greensuitetest.repository.UserRepository; If you want this repository to be a JPA repository, consider annotating your entities with one of these annotations: jakarta.persistence.Entity, jakarta.persistence.MappedSuperclass (preferred), or consider extending one of the following types with your repository: org.springframework.data.jpa.repository.JpaRepository
2025-07-31 19:52:57 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 19 ms. Found 0 JPA repository interfaces.
2025-07-31 19:52:57 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-07-31 19:52:57 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-07-31 19:52:57 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.app.greensuitetest.repository.CarbonActivityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-07-31 19:52:57 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.app.greensuitetest.repository.CompanyRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-07-31 19:52:57 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.app.greensuitetest.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-07-31 19:52:57 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Redis repository interfaces.
2025-07-31 19:52:57 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-31 19:52:57 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-31 19:52:57 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-31 19:52:57 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-31 19:52:57 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2703 ms
2025-07-31 19:52:58 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync", "version": "5.5.1"}, "os": {"type": "Windows", "name": "Windows 11", "architecture": "amd64", "version": "10.0"}, "platform": "Java/Oracle Corporation/23.0.1+11-39"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@77476fcf, com.mongodb.Jep395RecordCodecProvider@70805849, com.mongodb.KotlinCodecProvider@e7d0db2]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=UNSPECIFIED, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-07-31 19:52:58 [cluster-ClusterId{value='688b6e32aaf0cd052add2597', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=94853800, minRoundTripTimeNanos=0}
2025-07-31 19:52:58 [main] DEBUG c.a.g.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-07-31 19:52:58 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-31 19:52:59 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@aaa7000
2025-07-31 19:52:59 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-31 19:52:59 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-31 19:52:59 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-31 19:52:59 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-31 19:52:59 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-31 19:53:00 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 17.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-31 19:53:00 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-31 19:53:00 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-31 19:53:01 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"application": {"name": "Cluster0"}, "driver": {"name": "mongo-java-driver|sync", "version": "5.5.1"}, "os": {"type": "Windows", "name": "Windows 11", "architecture": "amd64", "version": "10.0"}, "platform": "Java/Oracle Corporation/23.0.1+11-39"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=majority, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=MongoCredential{mechanism=null, userName='root', source='admin', password=<hidden>, mechanismProperties=<hidden>}, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@77476fcf, com.mongodb.Jep395RecordCodecProvider@70805849, com.mongodb.KotlinCodecProvider@e7d0db2]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvHost=cluster0.reg096x.mongodb.net, srvServiceName=mongodb, mode=MULTIPLE, requiredClusterType=REPLICA_SET, requiredReplicaSetName='atlas-a2wisu-shard-0', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=true, invalidHostNameAllowed=false, context=null}, applicationName='Cluster0', compressorList=[], uuidRepresentation=UNSPECIFIED, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-07-31 19:53:01 [cluster-ClusterId{value='688b6e35aaf0cd052add2598', description='Cluster0'}-srv-cluster0.reg096x.mongodb.net] INFO  org.mongodb.driver.cluster - Adding discovered server ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017 to client view of cluster
2025-07-31 19:53:01 [cluster-ClusterId{value='688b6e35aaf0cd052add2598', description='Cluster0'}-srv-cluster0.reg096x.mongodb.net] INFO  org.mongodb.driver.cluster - Adding discovered server ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017 to client view of cluster
2025-07-31 19:53:01 [cluster-ClusterId{value='688b6e35aaf0cd052add2598', description='Cluster0'}-srv-cluster0.reg096x.mongodb.net] INFO  org.mongodb.driver.cluster - Adding discovered server ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017 to client view of cluster
2025-07-31 19:53:01 [main] INFO  org.mongodb.driver.cluster - Waiting for server to become available for operation with ID 10. Remaining time: 29993 ms. Selector: ReadPreferenceServerSelector{readPreference=primary}, topology description: {type=REPLICA_SET, servers=[{address=ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017, type=UNKNOWN, state=CONNECTING}, {address=ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017, type=UNKNOWN, state=CONNECTING}, {address=ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017, type=UNKNOWN, state=CONNECTING}].
2025-07-31 19:53:02 [cluster-ClusterId{value='688b6e35aaf0cd052add2598', description='Cluster0'}-ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017, type=REPLICA_SET_SECONDARY, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=461496800, minRoundTripTimeNanos=0, setName='atlas-a2wisu-shard-0', canonicalAddress=ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017, hosts=[ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017, ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017, ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017], passives=[], arbiters=[], primary='ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017', tagSet=TagSet{[Tag{name='availabilityZone', value='asia-southeast1-b'}, Tag{name='diskState', value='READY'}, Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='GCP'}, Tag{name='region', value='SOUTHEASTERN_ASIA_PACIFIC'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=75, topologyVersion=TopologyVersion{processId=687b9f8f929f40db9d4607f0, counter=3}, lastWriteDate=Thu Jul 31 19:53:01 GMT+06:30 2025, lastUpdateTimeNanos=213759818376900}
2025-07-31 19:53:02 [cluster-ClusterId{value='688b6e35aaf0cd052add2598', description='Cluster0'}-ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017, type=REPLICA_SET_SECONDARY, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=447116900, minRoundTripTimeNanos=0, setName='atlas-a2wisu-shard-0', canonicalAddress=ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017, hosts=[ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017, ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017, ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017], passives=[], arbiters=[], primary='ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017', tagSet=TagSet{[Tag{name='availabilityZone', value='asia-southeast1-a'}, Tag{name='diskState', value='READY'}, Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='GCP'}, Tag{name='region', value='SOUTHEASTERN_ASIA_PACIFIC'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=75, topologyVersion=TopologyVersion{processId=687b9a1bd1949089db6fffc8, counter=4}, lastWriteDate=Thu Jul 31 19:53:01 GMT+06:30 2025, lastUpdateTimeNanos=213759819299400}
2025-07-31 19:53:02 [cluster-ClusterId{value='688b6e35aaf0cd052add2598', description='Cluster0'}-ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017, type=REPLICA_SET_PRIMARY, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=461202000, minRoundTripTimeNanos=0, setName='atlas-a2wisu-shard-0', canonicalAddress=ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017, hosts=[ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017, ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017, ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017], passives=[], arbiters=[], primary='ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017', tagSet=TagSet{[Tag{name='availabilityZone', value='asia-southeast1-c'}, Tag{name='diskState', value='READY'}, Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='GCP'}, Tag{name='region', value='SOUTHEASTERN_ASIA_PACIFIC'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff000000000000023e, setVersion=75, topologyVersion=TopologyVersion{processId=687b9c9f1ed5bcdde2780983, counter=6}, lastWriteDate=Thu Jul 31 19:53:01 GMT+06:30 2025, lastUpdateTimeNanos=213759818408500}
2025-07-31 19:53:02 [cluster-ClusterId{value='688b6e35aaf0cd052add2598', description='Cluster0'}-ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017] INFO  org.mongodb.driver.cluster - Discovered replica set primary ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017 with max election id 7fffffff000000000000023e and max set version 75
2025-07-31 19:53:08 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-07-31 19:53:08 [main] INFO  c.a.g.s.DocumentIngestionService - Starting enhanced document ingestion process...
2025-07-31 19:53:09 [main] DEBUG c.a.g.s.DocumentIngestionService - Vector store contains documents: true
2025-07-31 19:53:09 [main] INFO  c.a.g.s.DocumentIngestionService - Documents already exist in vector store. Skipping ingestion. Set app.document.ingestion.force-reingest=true to force re-ingestion.
2025-07-31 19:53:09 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-31 19:53:12 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-07-31 19:53:12 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-31 19:53:12 [main] INFO  c.a.g.GreenSuiteTestApplication - Started GreenSuiteTestApplication in 18.176 seconds (process running for 19.648)
2025-07-31 19:53:13 [RMI TCP Connection(2)-192.168.100.7] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-31 19:53:13 [RMI TCP Connection(2)-192.168.100.7] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-31 19:53:13 [RMI TCP Connection(2)-192.168.100.7] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-07-31 19:53:47 [http-nio-8080-exec-6] DEBUG c.a.g.controller.AIChatController - Starting enhanced streaming chat for conversation: default with message: what is sustainability
2025-07-31 19:53:50 [http-nio-8080-exec-6] DEBUG c.a.g.s.ConversationContextService - Built comprehensive context with 15 elements for conversation: default
2025-07-31 19:53:50 [http-nio-8080-exec-6] DEBUG c.a.g.controller.AIChatController - Built fresh enhanced context for conversation: default
2025-07-31 19:53:52 [http-nio-8080-exec-6] WARN  c.a.g.controller.AIChatController - Enhanced vector search failed for query 'what is sustainability': Command failed with error 8 (UnknownError): 'PlanExecutor error during aggregation :: caused by :: Path 'metadata.domain' needs to be indexed as token' on server ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017. The full response is {"ok": 0.0, "errmsg": "PlanExecutor error during aggregation :: caused by :: Path 'metadata.domain' needs to be indexed as token", "code": 8, "codeName": "UnknownError", "$clusterTime": {"clusterTime": {"$timestamp": {"t": 1753968231, "i": 6}}, "signature": {"hash": {"$binary": {"base64": "djAmsPSTlQ3cma9nm7h/yPcZYMc=", "subType": "00"}}, "keyId": 7502068596248412165}}, "operationTime": {"$timestamp": {"t": 1753968231, "i": 6}}}
2025-07-31 19:53:54 [http-nio-8080-exec-6] DEBUG c.a.g.service.DocumentContextService - Query analysis: type=EXPLANATION, domain=general, complexity=SIMPLE, concepts=[]
2025-07-31 19:53:55 [http-nio-8080-exec-6] DEBUG c.a.g.controller.AIChatController - Added 10 relevant messages from chat history for conversation: default
2025-07-31 19:53:55 [http-nio-8080-exec-6] DEBUG c.a.g.controller.AIChatController - Built enhanced prompt with 12 total messages for conversation: default
2025-07-31 19:54:36 [HttpClient-2-Worker-2] DEBUG c.a.g.controller.AIChatController - Saved enhanced chat exchange to memory for conversation: default
2025-07-31 19:54:36 [HttpClient-2-Worker-2] DEBUG c.a.g.s.ConversationContextService - Updated context cache for conversation: default
2025-07-31 19:55:46 [http-nio-8080-exec-7] DEBUG c.a.g.controller.AIChatController - Starting enhanced streaming chat for conversation: default with message: what is sustainability other than in agriculture
2025-07-31 19:55:46 [http-nio-8080-exec-7] DEBUG c.a.g.controller.AIChatController - Using cached context for conversation: default
2025-07-31 19:55:47 [http-nio-8080-exec-7] WARN  c.a.g.controller.AIChatController - Enhanced vector search failed for query 'what is sustainability other than in agriculture': Command failed with error 8 (UnknownError): 'PlanExecutor error during aggregation :: caused by :: Path 'metadata.domain' needs to be indexed as token' on server ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017. The full response is {"ok": 0.0, "errmsg": "PlanExecutor error during aggregation :: caused by :: Path 'metadata.domain' needs to be indexed as token", "code": 8, "codeName": "UnknownError", "$clusterTime": {"clusterTime": {"$timestamp": {"t": 1753968346, "i": 9}}, "signature": {"hash": {"$binary": {"base64": "yPWk8CANrQvOxRCXS6Jvmz/gZGg=", "subType": "00"}}, "keyId": 7502068596248412165}}, "operationTime": {"$timestamp": {"t": 1753968346, "i": 9}}}
2025-07-31 19:55:47 [http-nio-8080-exec-7] DEBUG c.a.g.service.DocumentContextService - Query analysis: type=EXPLANATION, domain=general, complexity=SIMPLE, concepts=[]
2025-07-31 19:55:47 [http-nio-8080-exec-7] DEBUG c.a.g.controller.AIChatController - Added 10 relevant messages from chat history for conversation: default
2025-07-31 19:55:47 [http-nio-8080-exec-7] DEBUG c.a.g.controller.AIChatController - Built enhanced prompt with 12 total messages for conversation: default
2025-07-31 19:56:04 [HttpClient-2-Worker-5] DEBUG c.a.g.controller.AIChatController - Saved enhanced chat exchange to memory for conversation: default
2025-07-31 19:56:04 [HttpClient-2-Worker-5] DEBUG c.a.g.s.ConversationContextService - Updated context cache for conversation: default
2025-07-31 19:57:24 [http-nio-8080-exec-3] DEBUG c.a.g.controller.AIChatController - Starting enhanced streaming chat for conversation: default with message:  Renewable and Sustainable Energy tell me about it
2025-07-31 19:57:24 [http-nio-8080-exec-3] DEBUG c.a.g.controller.AIChatController - Using cached context for conversation: default
2025-07-31 19:57:25 [http-nio-8080-exec-3] WARN  c.a.g.controller.AIChatController - Enhanced vector search failed for query ' Renewable and Sustainable Energy tell me about it': Command failed with error 8 (UnknownError): 'PlanExecutor error during aggregation :: caused by :: Path 'metadata.domain' needs to be indexed as token' on server ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017. The full response is {"ok": 0.0, "errmsg": "PlanExecutor error during aggregation :: caused by :: Path 'metadata.domain' needs to be indexed as token", "code": 8, "codeName": "UnknownError", "$clusterTime": {"clusterTime": {"$timestamp": {"t": 1753968444, "i": 12}}, "signature": {"hash": {"$binary": {"base64": "ryjBv/DsF+UTZF5Y6wLQ7M62aCY=", "subType": "00"}}, "keyId": 7502068596248412165}}, "operationTime": {"$timestamp": {"t": 1753968444, "i": 12}}}
2025-07-31 19:57:25 [http-nio-8080-exec-3] DEBUG c.a.g.service.DocumentContextService - Query analysis: type=GENERAL, domain=energy_management, complexity=SIMPLE, concepts=[energy, renewable]
2025-07-31 19:57:25 [http-nio-8080-exec-3] DEBUG c.a.g.controller.AIChatController - Added 10 relevant messages from chat history for conversation: default
2025-07-31 19:57:25 [http-nio-8080-exec-3] DEBUG c.a.g.controller.AIChatController - Built enhanced prompt with 12 total messages for conversation: default
2025-07-31 19:57:51 [HttpClient-2-Worker-8] DEBUG c.a.g.controller.AIChatController - Saved enhanced chat exchange to memory for conversation: default
2025-07-31 19:57:51 [HttpClient-2-Worker-8] DEBUG c.a.g.s.ConversationContextService - Updated context cache for conversation: default
2025-07-31 19:58:36 [http-nio-8080-exec-9] WARN  c.a.greensuitetest.security.JwtUtil - Expired JWT token
2025-07-31 19:58:36 [http-nio-8080-exec-9] DEBUG c.a.g.controller.AIChatController - Starting enhanced streaming chat for conversation: default with message: I dont work in agriculture
2025-07-31 19:58:36 [http-nio-8080-exec-9] DEBUG c.a.g.controller.AIChatController - Using cached context for conversation: default
2025-07-31 19:58:37 [http-nio-8080-exec-9] WARN  c.a.g.controller.AIChatController - Enhanced vector search failed for query 'I dont work in agriculture': Command failed with error 8 (UnknownError): 'PlanExecutor error during aggregation :: caused by :: Path 'metadata.domain' needs to be indexed as token' on server ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017. The full response is {"ok": 0.0, "errmsg": "PlanExecutor error during aggregation :: caused by :: Path 'metadata.domain' needs to be indexed as token", "code": 8, "codeName": "UnknownError", "$clusterTime": {"clusterTime": {"$timestamp": {"t": 1753968516, "i": 15}}, "signature": {"hash": {"$binary": {"base64": "rreplR4845e6RkmlcsPNDq8FhnE=", "subType": "00"}}, "keyId": 7502068596248412165}}, "operationTime": {"$timestamp": {"t": 1753968516, "i": 15}}}
2025-07-31 19:58:37 [http-nio-8080-exec-9] DEBUG c.a.g.service.DocumentContextService - Query analysis: type=GENERAL, domain=general, complexity=SIMPLE, concepts=[]
2025-07-31 19:58:37 [http-nio-8080-exec-9] DEBUG c.a.g.controller.AIChatController - Added 10 relevant messages from chat history for conversation: default
2025-07-31 19:58:37 [http-nio-8080-exec-9] DEBUG c.a.g.controller.AIChatController - Built enhanced prompt with 12 total messages for conversation: default
2025-07-31 19:58:47 [HttpClient-2-Worker-9] DEBUG c.a.g.controller.AIChatController - Saved enhanced chat exchange to memory for conversation: default
2025-07-31 19:58:47 [HttpClient-2-Worker-9] DEBUG c.a.g.s.ConversationContextService - Updated context cache for conversation: default
2025-07-31 19:59:13 [http-nio-8080-exec-7] WARN  c.a.greensuitetest.security.JwtUtil - Expired JWT token
2025-07-31 19:59:13 [http-nio-8080-exec-7] DEBUG c.a.g.controller.AIChatController - Starting enhanced streaming chat for conversation: default with message: I build sustainability softwares
2025-07-31 19:59:13 [http-nio-8080-exec-7] DEBUG c.a.g.s.ConversationContextService - Built comprehensive context with 16 elements for conversation: default
2025-07-31 19:59:13 [http-nio-8080-exec-7] DEBUG c.a.g.controller.AIChatController - Built fresh enhanced context for conversation: default
2025-07-31 19:59:13 [http-nio-8080-exec-7] WARN  c.a.g.controller.AIChatController - Enhanced vector search failed for query 'I build sustainability softwares': Command failed with error 8 (UnknownError): 'PlanExecutor error during aggregation :: caused by :: Path 'metadata.domain' needs to be indexed as token' on server ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017. The full response is {"ok": 0.0, "errmsg": "PlanExecutor error during aggregation :: caused by :: Path 'metadata.domain' needs to be indexed as token", "code": 8, "codeName": "UnknownError", "$clusterTime": {"clusterTime": {"$timestamp": {"t": 1753968553, "i": 2}}, "signature": {"hash": {"$binary": {"base64": "EJHhmeCYbm7+L5KVB+LK7lVpjOs=", "subType": "00"}}, "keyId": 7502068596248412165}}, "operationTime": {"$timestamp": {"t": 1753968553, "i": 2}}}
2025-07-31 19:59:14 [http-nio-8080-exec-7] DEBUG c.a.g.service.DocumentContextService - Query analysis: type=GENERAL, domain=general, complexity=SIMPLE, concepts=[]
2025-07-31 19:59:14 [http-nio-8080-exec-7] DEBUG c.a.g.controller.AIChatController - Added 10 relevant messages from chat history for conversation: default
2025-07-31 19:59:14 [http-nio-8080-exec-7] DEBUG c.a.g.controller.AIChatController - Built enhanced prompt with 12 total messages for conversation: default
2025-07-31 19:59:34 [HttpClient-2-Worker-9] DEBUG c.a.g.controller.AIChatController - Saved enhanced chat exchange to memory for conversation: default
2025-07-31 19:59:34 [HttpClient-2-Worker-9] DEBUG c.a.g.s.ConversationContextService - Updated context cache for conversation: default
2025-07-31 20:00:28 [http-nio-8080-exec-10] WARN  c.a.greensuitetest.security.JwtUtil - Expired JWT token
2025-07-31 20:00:28 [http-nio-8080-exec-10] DEBUG c.a.g.controller.AIChatController - Starting enhanced streaming chat for conversation: default with message: but not agricultural domain why are you obessing with agriculture? I said I am not in agriculture
2025-07-31 20:00:28 [http-nio-8080-exec-10] DEBUG c.a.g.controller.AIChatController - Using cached context for conversation: default
2025-07-31 20:00:29 [http-nio-8080-exec-10] WARN  c.a.g.controller.AIChatController - Enhanced vector search failed for query 'but not agricultural domain why are you obessing with agriculture? I said I am not in agriculture': Command failed with error 8 (UnknownError): 'PlanExecutor error during aggregation :: caused by :: Path 'metadata.domain' needs to be indexed as token' on server ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017. The full response is {"ok": 0.0, "errmsg": "PlanExecutor error during aggregation :: caused by :: Path 'metadata.domain' needs to be indexed as token", "code": 8, "codeName": "UnknownError", "$clusterTime": {"clusterTime": {"$timestamp": {"t": 1753968628, "i": 19}}, "signature": {"hash": {"$binary": {"base64": "flfLvjT7vtBIR4relTh0/oiSR/A=", "subType": "00"}}, "keyId": 7502068596248412165}}, "operationTime": {"$timestamp": {"t": 1753968628, "i": 19}}}
2025-07-31 20:00:29 [http-nio-8080-exec-10] DEBUG c.a.g.service.DocumentContextService - Query analysis: type=GENERAL, domain=general, complexity=MODERATE, concepts=[]
2025-07-31 20:00:29 [http-nio-8080-exec-10] DEBUG c.a.g.controller.AIChatController - Added 10 relevant messages from chat history for conversation: default
2025-07-31 20:00:29 [http-nio-8080-exec-10] DEBUG c.a.g.controller.AIChatController - Built enhanced prompt with 12 total messages for conversation: default
2025-07-31 20:00:39 [HttpClient-2-Worker-7] DEBUG c.a.g.controller.AIChatController - Saved enhanced chat exchange to memory for conversation: default
2025-07-31 20:00:39 [HttpClient-2-Worker-7] DEBUG c.a.g.s.ConversationContextService - Updated context cache for conversation: default
2025-07-31 20:04:05 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-31 20:04:05 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-31 20:04:06 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-31 20:04:06 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-31 20:04:06 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-31 20:08:16 [main] INFO  c.a.g.GreenSuiteTestApplication - Starting GreenSuiteTestApplication using Java 23.0.1 with PID 23500 (C:\Users\User\Desktop\Git GreenSuite\GreenSuite_BackEnd-main\target\classes started by User in C:\Users\User\Desktop\Git GreenSuite\GreenSuite_BackEnd-main)
2025-07-31 20:08:16 [main] DEBUG c.a.g.GreenSuiteTestApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-07-31 20:08:16 [main] INFO  c.a.g.GreenSuiteTestApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-31 20:08:18 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-07-31 20:08:18 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-07-31 20:08:18 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 251 ms. Found 3 MongoDB repository interfaces.
2025-07-31 20:08:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-07-31 20:08:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-31 20:08:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JPA - Could not safely identify store assignment for repository candidate interface com.app.greensuitetest.repository.CarbonActivityRepository; If you want this repository to be a JPA repository, consider annotating your entities with one of these annotations: jakarta.persistence.Entity, jakarta.persistence.MappedSuperclass (preferred), or consider extending one of the following types with your repository: org.springframework.data.jpa.repository.JpaRepository
2025-07-31 20:08:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JPA - Could not safely identify store assignment for repository candidate interface com.app.greensuitetest.repository.CompanyRepository; If you want this repository to be a JPA repository, consider annotating your entities with one of these annotations: jakarta.persistence.Entity, jakarta.persistence.MappedSuperclass (preferred), or consider extending one of the following types with your repository: org.springframework.data.jpa.repository.JpaRepository
2025-07-31 20:08:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data JPA - Could not safely identify store assignment for repository candidate interface com.app.greensuitetest.repository.UserRepository; If you want this repository to be a JPA repository, consider annotating your entities with one of these annotations: jakarta.persistence.Entity, jakarta.persistence.MappedSuperclass (preferred), or consider extending one of the following types with your repository: org.springframework.data.jpa.repository.JpaRepository
2025-07-31 20:08:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 0 JPA repository interfaces.
2025-07-31 20:08:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-07-31 20:08:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-07-31 20:08:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.app.greensuitetest.repository.CarbonActivityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-07-31 20:08:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.app.greensuitetest.repository.CompanyRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-07-31 20:08:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.app.greensuitetest.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-07-31 20:08:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-07-31 20:08:20 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-31 20:08:20 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-31 20:08:20 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-31 20:08:20 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-31 20:08:20 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3616 ms
2025-07-31 20:08:21 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync", "version": "5.5.1"}, "os": {"type": "Windows", "name": "Windows 11", "architecture": "amd64", "version": "10.0"}, "platform": "Java/Oracle Corporation/23.0.1+11-39"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@e7d0db2, com.mongodb.Jep395RecordCodecProvider@4a41caed, com.mongodb.KotlinCodecProvider@6b4fd7d]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=UNSPECIFIED, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-07-31 20:08:21 [cluster-ClusterId{value='688b71cd92ecad6ee3dce26e', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=79331800, minRoundTripTimeNanos=0}
2025-07-31 20:08:21 [main] DEBUG c.a.g.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-07-31 20:08:22 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-31 20:08:22 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@5e72c82a
2025-07-31 20:08:22 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-31 20:08:22 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-31 20:08:22 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-31 20:08:22 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-31 20:08:23 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-31 20:08:23 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 17.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-31 20:08:24 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-31 20:08:24 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-31 20:08:25 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"application": {"name": "Cluster0"}, "driver": {"name": "mongo-java-driver|sync", "version": "5.5.1"}, "os": {"type": "Windows", "name": "Windows 11", "architecture": "amd64", "version": "10.0"}, "platform": "Java/Oracle Corporation/23.0.1+11-39"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=majority, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=MongoCredential{mechanism=null, userName='root', source='admin', password=<hidden>, mechanismProperties=<hidden>}, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@e7d0db2, com.mongodb.Jep395RecordCodecProvider@4a41caed, com.mongodb.KotlinCodecProvider@6b4fd7d]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[127.0.0.1:27017], srvHost=cluster0.reg096x.mongodb.net, srvServiceName=mongodb, mode=MULTIPLE, requiredClusterType=REPLICA_SET, requiredReplicaSetName='atlas-a2wisu-shard-0', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=true, invalidHostNameAllowed=false, context=null}, applicationName='Cluster0', compressorList=[], uuidRepresentation=UNSPECIFIED, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-07-31 20:08:25 [cluster-ClusterId{value='688b71d192ecad6ee3dce26f', description='Cluster0'}-srv-cluster0.reg096x.mongodb.net] INFO  org.mongodb.driver.cluster - Adding discovered server ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017 to client view of cluster
2025-07-31 20:08:25 [cluster-ClusterId{value='688b71d192ecad6ee3dce26f', description='Cluster0'}-srv-cluster0.reg096x.mongodb.net] INFO  org.mongodb.driver.cluster - Adding discovered server ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017 to client view of cluster
2025-07-31 20:08:25 [cluster-ClusterId{value='688b71d192ecad6ee3dce26f', description='Cluster0'}-srv-cluster0.reg096x.mongodb.net] INFO  org.mongodb.driver.cluster - Adding discovered server ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017 to client view of cluster
2025-07-31 20:08:25 [main] INFO  org.mongodb.driver.cluster - Waiting for server to become available for operation with ID 10. Remaining time: 29995 ms. Selector: ReadPreferenceServerSelector{readPreference=primary}, topology description: {type=REPLICA_SET, servers=[{address=ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017, type=UNKNOWN, state=CONNECTING}, {address=ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017, type=UNKNOWN, state=CONNECTING}, {address=ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017, type=UNKNOWN, state=CONNECTING}].
2025-07-31 20:08:25 [cluster-ClusterId{value='688b71d192ecad6ee3dce26f', description='Cluster0'}-ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017, type=REPLICA_SET_SECONDARY, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=347437000, minRoundTripTimeNanos=0, setName='atlas-a2wisu-shard-0', canonicalAddress=ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017, hosts=[ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017, ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017, ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017], passives=[], arbiters=[], primary='ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017', tagSet=TagSet{[Tag{name='availabilityZone', value='asia-southeast1-b'}, Tag{name='diskState', value='READY'}, Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='GCP'}, Tag{name='region', value='SOUTHEASTERN_ASIA_PACIFIC'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=75, topologyVersion=TopologyVersion{processId=687b9f8f929f40db9d4607f0, counter=3}, lastWriteDate=Thu Jul 31 20:08:24 GMT+06:30 2025, lastUpdateTimeNanos=214683284980900}
2025-07-31 20:08:25 [cluster-ClusterId{value='688b71d192ecad6ee3dce26f', description='Cluster0'}-ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017, type=REPLICA_SET_SECONDARY, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=341078800, minRoundTripTimeNanos=0, setName='atlas-a2wisu-shard-0', canonicalAddress=ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017, hosts=[ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017, ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017, ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017], passives=[], arbiters=[], primary='ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017', tagSet=TagSet{[Tag{name='availabilityZone', value='asia-southeast1-a'}, Tag{name='diskState', value='READY'}, Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='GCP'}, Tag{name='region', value='SOUTHEASTERN_ASIA_PACIFIC'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=null, setVersion=75, topologyVersion=TopologyVersion{processId=687b9a1bd1949089db6fffc8, counter=4}, lastWriteDate=Thu Jul 31 20:08:24 GMT+06:30 2025, lastUpdateTimeNanos=214683284981000}
2025-07-31 20:08:26 [cluster-ClusterId{value='688b71d192ecad6ee3dce26f', description='Cluster0'}-ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017, type=REPLICA_SET_PRIMARY, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=99451900, minRoundTripTimeNanos=0, setName='atlas-a2wisu-shard-0', canonicalAddress=ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017, hosts=[ac-qe7vmrt-shard-00-00.reg096x.mongodb.net:27017, ac-qe7vmrt-shard-00-01.reg096x.mongodb.net:27017, ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017], passives=[], arbiters=[], primary='ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017', tagSet=TagSet{[Tag{name='availabilityZone', value='asia-southeast1-c'}, Tag{name='diskState', value='READY'}, Tag{name='nodeType', value='ELECTABLE'}, Tag{name='provider', value='GCP'}, Tag{name='region', value='SOUTHEASTERN_ASIA_PACIFIC'}, Tag{name='workloadType', value='OPERATIONAL'}]}, electionId=7fffffff000000000000023e, setVersion=75, topologyVersion=TopologyVersion{processId=687b9c9f1ed5bcdde2780983, counter=6}, lastWriteDate=Thu Jul 31 20:08:25 GMT+06:30 2025, lastUpdateTimeNanos=214684048030200}
2025-07-31 20:08:26 [cluster-ClusterId{value='688b71d192ecad6ee3dce26f', description='Cluster0'}-ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017] INFO  org.mongodb.driver.cluster - Discovered replica set primary ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017 with max election id 7fffffff000000000000023e and max set version 75
2025-07-31 20:08:34 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-07-31 20:08:34 [main] INFO  c.a.g.s.DocumentIngestionService - Starting enhanced document ingestion process...
2025-07-31 20:08:34 [main] DEBUG c.a.g.s.DocumentIngestionService - Vector store contains documents: true
2025-07-31 20:08:34 [main] INFO  c.a.g.s.DocumentIngestionService - Documents already exist in vector store. Skipping ingestion. Set app.document.ingestion.force-reingest=true to force re-ingestion.
2025-07-31 20:08:34 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-31 20:08:36 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-07-31 20:08:37 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-31 20:08:37 [main] INFO  c.a.g.GreenSuiteTestApplication - Started GreenSuiteTestApplication in 21.698 seconds (process running for 23.312)
2025-07-31 20:08:38 [RMI TCP Connection(4)-192.168.100.7] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-31 20:08:38 [RMI TCP Connection(4)-192.168.100.7] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-31 20:08:38 [RMI TCP Connection(4)-192.168.100.7] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-07-31 20:09:35 [http-nio-8080-exec-3] WARN  c.a.greensuitetest.security.JwtUtil - Expired JWT token
2025-07-31 20:09:38 [http-nio-8080-exec-3] DEBUG c.a.g.controller.AIChatController - Starting enhanced streaming chat for conversation: default with message: whta is my name
2025-07-31 20:09:38 [http-nio-8080-exec-3] DEBUG c.a.g.s.ConversationContextService - Built comprehensive context with 17 elements for conversation: default
2025-07-31 20:09:38 [http-nio-8080-exec-3] DEBUG c.a.g.controller.AIChatController - Built fresh enhanced context for conversation: default
2025-07-31 20:09:40 [http-nio-8080-exec-3] WARN  c.a.g.controller.AIChatController - Enhanced vector search failed for query 'whta is my name': Command failed with error 8 (UnknownError): 'PlanExecutor error during aggregation :: caused by :: Path 'metadata.domain' needs to be indexed as token' on server ac-qe7vmrt-shard-00-02.reg096x.mongodb.net:27017. The full response is {"ok": 0.0, "errmsg": "PlanExecutor error during aggregation :: caused by :: Path 'metadata.domain' needs to be indexed as token", "code": 8, "codeName": "UnknownError", "$clusterTime": {"clusterTime": {"$timestamp": {"t": 1753969179, "i": 16}}, "signature": {"hash": {"$binary": {"base64": "mEa338pBqCdLSSL7DJZahXX3XzQ=", "subType": "00"}}, "keyId": 7502068596248412165}}, "operationTime": {"$timestamp": {"t": 1753969179, "i": 16}}}
2025-07-31 20:09:41 [http-nio-8080-exec-3] DEBUG c.a.g.service.DocumentContextService - Query analysis: type=GENERAL, domain=general, complexity=SIMPLE, concepts=[]
2025-07-31 20:09:41 [http-nio-8080-exec-3] DEBUG c.a.g.controller.AIChatController - Added 10 relevant messages from chat history for conversation: default
2025-07-31 20:09:41 [http-nio-8080-exec-3] DEBUG c.a.g.controller.AIChatController - Built enhanced prompt with 12 total messages for conversation: default
2025-07-31 20:11:17 [task-5] DEBUG c.a.g.controller.AIChatController - Saved enhanced chat exchange to memory for conversation: default
2025-07-31 20:11:17 [task-5] DEBUG c.a.g.s.ConversationContextService - Updated context cache for conversation: default
2025-07-31 20:13:03 [lettuce-eventExecutorLoop-1-1] INFO  i.l.core.protocol.ConnectionWatchdog - Reconnecting, last destination was localhost/127.0.0.1:6379
2025-07-31 20:13:03 [lettuce-nioEventLoop-4-2] WARN  i.l.core.protocol.ConnectionWatchdog - Cannot reconnect to [localhost/<unresolved>:6379]: Connection refused: getsockopt: localhost/127.0.0.1:6379
2025-07-31 20:13:09 [lettuce-eventExecutorLoop-1-7] INFO  i.l.core.protocol.ConnectionWatchdog - Reconnecting, last destination was localhost/<unresolved>:6379
2025-07-31 20:13:09 [lettuce-nioEventLoop-4-13] WARN  i.l.core.protocol.ConnectionWatchdog - Cannot reconnect to [localhost/<unresolved>:6379]: Connection refused: getsockopt: localhost/127.0.0.1:6379
2025-07-31 20:13:21 [lettuce-eventExecutorLoop-1-11] INFO  i.l.core.protocol.ConnectionWatchdog - Reconnecting, last destination was localhost/<unresolved>:6379
2025-07-31 20:13:21 [lettuce-nioEventLoop-4-15] WARN  i.l.core.protocol.ConnectionWatchdog - Cannot reconnect to [localhost/<unresolved>:6379]: Connection refused: getsockopt: localhost/127.0.0.1:6379
2025-07-31 20:13:38 [lettuce-eventExecutorLoop-1-13] INFO  i.l.core.protocol.ConnectionWatchdog - Reconnecting, last destination was localhost/<unresolved>:6379
2025-07-31 20:13:38 [lettuce-nioEventLoop-4-16] WARN  i.l.core.protocol.ConnectionWatchdog - Cannot reconnect to [localhost/<unresolved>:6379]: Connection refused: getsockopt: localhost/127.0.0.1:6379
